import{_ as s,c as i,o as a,a4 as n}from"./chunks/framework.Cohn-APp.js";const c=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"document/workers/timehut/Bebememo 服务管理.md","filePath":"document/workers/timehut/Bebememo 服务管理.md"}'),t={name:"document/workers/timehut/Bebememo 服务管理.md"},h=n(`<h2 id="数据相关脚本" tabindex="-1">数据相关脚本 <a class="header-anchor" href="#数据相关脚本" aria-label="Permalink to &quot;数据相关脚本&quot;">​</a></h2><h3 id="日本-且静默期在-6-1-结束" tabindex="-1">(日本)且静默期在 6.1 结束 <a class="header-anchor" href="#日本-且静默期在-6-1-结束" aria-label="Permalink to &quot;(日本)且静默期在 6.1 结束&quot;">​</a></h3><p>我们找 10 个日本的 baby，静默期结束的时间在 6.1 以后，并且现在已经传满 1 个 G 的</p><div class="language-ruby vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ruby</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Baby</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.active.where(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">country:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;JP&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).where(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;created_at &gt; ?&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">60</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.days.ago).find_each </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">do</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> |baby|</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  next</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> unless</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> baby.linked_user.is_baby?</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  next</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> baby.vip?</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  next</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> unless</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> baby.space_used </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.gigabytes)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 静默期一周去生成</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> baby.created_at </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.day </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> BabyPayment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.quiet_perlod(baby)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    puts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> baby.id</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  end</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  break</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 11</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span></code></pre></div>`,4),e=[h];function k(l,p,r,d,E,y){return a(),i("div",null,e)}const o=s(t,[["render",k]]);export{c as __pageData,o as default};
